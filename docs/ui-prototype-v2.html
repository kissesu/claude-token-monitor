<!DOCTYPE html>
<html lang="zh-CN" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Token Monitor - Desktop UI</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        // 使用系统原生字体栈，获得最原生的渲染效果
                        sans: ['system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif'],
                        mono: ['Menlo', 'Monaco', 'Courier New', 'monospace'],
                    },
                    colors: {
                        // 桌面端特有的颜色层级
                        window: "hsl(240 10% 3.9%)",     // 整个窗口背景
                        sidebar: "hsl(240 10% 3.9% / 0.95)", // 侧边栏（带透明度）
                        surface: "hsl(240 5% 6%)",       // 内容区背景
                        surface2: "hsl(240 5% 10%)",      // 二级内容背景
                        border: "hsl(240 3.7% 15.9%)",
                        primary: "hsl(240 5.9% 90%)",     // 主文字
                        muted: "hsl(240 5% 64.9%)",       // 次要文字
                        accent: "hsl(21, 90%, 48%)",      // Claude 品牌色 (Orange)
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer base {
            body {
                @apply bg-window text-primary antialiased cursor-default select-none overflow-hidden;
                /* 禁用原生滚动条，使用自定义样式 */
            }
            
            /* 模拟 macOS 窗口拖拽区 */
            .titlebar-drag-region {
                -webkit-app-region: drag;
            }
            
            /* 可交互元素取消拖拽属性 */
            .no-drag {
                -webkit-app-region: no-drag;
            }

            /* 细滚动条样式 */
            ::-webkit-scrollbar {
                width: 8px;
                height: 8px;
            }
            ::-webkit-scrollbar-track {
                background: transparent;
            }
            ::-webkit-scrollbar-thumb {
                @apply bg-white/10 rounded-full;
            }
            ::-webkit-scrollbar-thumb:hover {
                @apply bg-white/20;
            }
        }
    </style>
</head>
<body class="flex h-screen w-screen text-[13px] leading-normal font-sans">

    <!-- Sidebar (Native Material Style) -->
    <aside class="w-[240px] flex flex-col border-r border-border bg-sidebar backdrop-blur-xl relative z-20">
        <!-- Window Controls Placeholder (macOS Traffic Lights) -->
        <div class="h-[38px] px-4 flex items-center titlebar-drag-region shrink-0">
            <!-- 仅作视觉占位，实际由 Tauri 控制 -->
            <div class="flex gap-2 group opacity-60 hover:opacity-100 transition-opacity no-drag">
                <div class="w-3 h-3 rounded-full bg-[#FF5F57] shadow-sm"></div>
                <div class="w-3 h-3 rounded-full bg-[#FEBC2E] shadow-sm"></div>
                <div class="w-3 h-3 rounded-full bg-[#28C840] shadow-sm"></div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="flex-1 px-2 py-2 space-y-0.5 overflow-y-auto">
            <div class="px-3 py-1.5 text-[11px] font-semibold text-muted uppercase tracking-wider mb-1">监控</div>
            
            <a href="#" class="flex items-center gap-2.5 px-3 py-1.5 rounded-md bg-white/10 text-white font-medium">
                <i data-lucide="layout-grid" class="w-4 h-4 text-accent"></i>
                仪表盘
            </a>
            <a href="#" class="flex items-center gap-2.5 px-3 py-1.5 rounded-md text-muted hover:text-white hover:bg-white/5 transition-colors">
                <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
                统计分析
            </a>
            <a href="#" class="flex items-center gap-2.5 px-3 py-1.5 rounded-md text-muted hover:text-white hover:bg-white/5 transition-colors">
                <i data-lucide="layers" class="w-4 h-4"></i>
                供应商管理
            </a>

            <div class="mt-6 px-3 py-1.5 text-[11px] font-semibold text-muted uppercase tracking-wider mb-1">历史</div>
            <a href="#" class="flex items-center gap-2.5 px-3 py-1.5 rounded-md text-muted hover:text-white hover:bg-white/5 transition-colors">
                <i data-lucide="clock" class="w-4 h-4"></i>
                最近会话
            </a>
            <a href="#" class="flex items-center gap-2.5 px-3 py-1.5 rounded-md text-muted hover:text-white hover:bg-white/5 transition-colors">
                <i data-lucide="file-text" class="w-4 h-4"></i>
                日志记录
            </a>
        </div>

        <!-- User / Settings Bottom -->
        <div class="p-3 border-t border-border mt-auto">
            <button class="w-full flex items-center gap-3 px-2 py-1.5 rounded-md hover:bg-white/5 transition-colors text-left group">
                <div class="w-7 h-7 rounded bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-[10px] font-bold text-white shadow-inner">
                    OI
                </div>
                <div class="flex-1 min-w-0">
                    <div class="text-xs font-medium text-primary truncate">Atlas.oi</div>
                    <div class="text-[10px] text-muted truncate">Pro Plan</div>
                </div>
                <i data-lucide="settings-2" class="w-3.5 h-3.5 text-muted opacity-0 group-hover:opacity-100 transition-opacity"></i>
            </button>
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 flex flex-col bg-surface min-w-0">
        
        <!-- Native-like Titlebar / Header -->
        <header class="h-[38px] flex items-center justify-between px-4 border-b border-border bg-surface titlebar-drag-region shrink-0">
            <!-- Breadcrumbs / Page Title -->
            <div class="flex items-center gap-2 text-xs font-medium text-muted">
                <span class="text-primary">仪表盘</span>
            </div>

            <!-- Toolbar Actions -->
            <div class="flex items-center gap-2 no-drag">
                <!-- Provider Selector -->
                <button class="flex items-center gap-2 px-2 py-1 rounded hover:bg-white/5 transition-colors text-xs text-primary border border-transparent hover:border-border">
                    <div class="w-1.5 h-1.5 rounded-full bg-emerald-500"></div>
                    <span>Personal API</span>
                    <i data-lucide="chevron-down" class="w-3 h-3 text-muted"></i>
                </button>
                
                <div class="w-px h-3 bg-border mx-1"></div>

                <button class="p-1.5 rounded hover:bg-white/5 text-muted hover:text-primary transition-colors">
                    <i data-lucide="refresh-cw" class="w-3.5 h-3.5"></i>
                </button>
            </div>
        </header>

        <!-- Scrollable Content -->
        <div class="flex-1 overflow-y-auto p-5">
            <div class="max-w-5xl mx-auto space-y-6">
                
                <!-- Date Filter Row -->
                <div class="flex items-center justify-between mb-2">
                    <h2 class="text-lg font-semibold tracking-tight text-white">今日概览</h2>
                    <div class="flex bg-surface2 rounded-md p-0.5 border border-border">
                        <button class="px-3 py-1 text-xs font-medium rounded-sm bg-white/10 text-white shadow-sm">今日</button>
                        <button class="px-3 py-1 text-xs font-medium rounded-sm text-muted hover:text-white transition-colors">本周</button>
                        <button class="px-3 py-1 text-xs font-medium rounded-sm text-muted hover:text-white transition-colors">本月</button>
                    </div>
                </div>

                <!-- KPI Grid -->
                <div class="grid grid-cols-4 gap-4">
                    <!-- KPI Card 1 -->
                    <div class="bg-surface2 border border-border rounded-lg p-4 relative group hover:border-white/20 transition-colors">
                        <div class="flex justify-between items-start mb-2">
                            <div class="text-xs font-medium text-muted">总费用 (估算)</div>
                            <i data-lucide="dollar-sign" class="w-3.5 h-3.5 text-muted/50"></i>
                        </div>
                        <div class="text-2xl font-bold text-white tracking-tight">¥29.96</div>
                        <div class="mt-2 flex items-center text-[11px] text-emerald-400">
                            <i data-lucide="trending-up" class="w-3 h-3 mr-1"></i>
                            +12.5%
                        </div>
                    </div>

                    <!-- KPI Card 2 -->
                    <div class="bg-surface2 border border-border rounded-lg p-4 relative group hover:border-white/20 transition-colors">
                        <div class="flex justify-between items-start mb-2">
                            <div class="text-xs font-medium text-muted">Token 总数</div>
                            <i data-lucide="zap" class="w-3.5 h-3.5 text-muted/50"></i>
                        </div>
                        <div class="text-2xl font-bold text-white tracking-tight">1.2M</div>
                        <div class="mt-2 flex items-center gap-2 text-[10px] font-mono text-muted">
                            <span>In: 800k</span>
                            <span class="w-px h-2 bg-white/20"></span>
                            <span>Out: 400k</span>
                        </div>
                    </div>

                    <!-- KPI Card 3 -->
                    <div class="bg-surface2 border border-border rounded-lg p-4 relative group hover:border-white/20 transition-colors">
                        <div class="flex justify-between items-start mb-2">
                            <div class="text-xs font-medium text-muted">缓存命中率</div>
                            <i data-lucide="database" class="w-3.5 h-3.5 text-muted/50"></i>
                        </div>
                        <div class="text-2xl font-bold text-white tracking-tight">84.5%</div>
                         <!-- Progress Bar -->
                        <div class="w-full bg-white/5 h-1 mt-3 rounded-full overflow-hidden">
                            <div class="bg-accent h-full w-[84.5%]"></div>
                        </div>
                    </div>

                    <!-- KPI Card 4 -->
                    <div class="bg-surface2 border border-border rounded-lg p-4 relative group hover:border-white/20 transition-colors">
                        <div class="flex justify-between items-start mb-2">
                            <div class="text-xs font-medium text-muted">活跃会话</div>
                            <i data-lucide="activity" class="w-3.5 h-3.5 text-muted/50"></i>
                        </div>
                        <div class="text-2xl font-bold text-white tracking-tight">24</div>
                        <div class="mt-2 text-[11px] text-muted">2 分钟前活跃</div>
                    </div>
                </div>

                <!-- Main Content Split -->
                <div class="grid grid-cols-3 gap-4 h-[320px]">
                    <!-- Chart Section -->
                    <div class="col-span-2 bg-surface2 border border-border rounded-lg p-4 flex flex-col">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-sm font-medium text-primary">Token 使用趋势</h3>
                            <div class="flex gap-2">
                                <span class="text-[10px] flex items-center gap-1 text-muted">
                                    <div class="w-2 h-2 rounded-full bg-accent"></div> Sonnet 3.5
                                </span>
                                <span class="text-[10px] flex items-center gap-1 text-muted">
                                    <div class="w-2 h-2 rounded-full bg-blue-500"></div> Opus 3
                                </span>
                            </div>
                        </div>
                        <!-- Mock Chart Area -->
                        <div class="flex-1 flex items-end justify-between gap-1 px-2 pb-2 border-b border-l border-white/5 relative">
                            <!-- Grid lines -->
                            <div class="absolute inset-0 flex flex-col justify-between pointer-events-none opacity-20">
                                <div class="w-full h-px bg-white/20"></div>
                                <div class="w-full h-px bg-white/20"></div>
                                <div class="w-full h-px bg-white/20"></div>
                                <div class="w-full h-px bg-white/20"></div>
                            </div>
                            
                            <!-- Bars -->
                            <div class="w-full bg-white/5 hover:bg-white/10 h-[30%] rounded-t-sm transition-all"></div>
                            <div class="w-full bg-white/5 hover:bg-white/10 h-[45%] rounded-t-sm transition-all"></div>
                            <div class="w-full bg-white/5 hover:bg-white/10 h-[25%] rounded-t-sm transition-all"></div>
                            <div class="w-full bg-white/5 hover:bg-white/10 h-[60%] rounded-t-sm transition-all"></div>
                            <div class="w-full bg-white/5 hover:bg-white/10 h-[40%] rounded-t-sm transition-all"></div>
                            <div class="w-full bg-white/5 hover:bg-white/10 h-[55%] rounded-t-sm transition-all"></div>
                            <div class="w-full bg-white/5 hover:bg-white/10 h-[70%] rounded-t-sm transition-all"></div>
                            <div class="w-full bg-white/5 hover:bg-white/10 h-[45%] rounded-t-sm transition-all"></div>
                            <div class="w-full bg-accent hover:opacity-90 h-[85%] rounded-t-sm transition-all shadow-[0_0_10px_rgba(234,88,12,0.3)]"></div>
                            <div class="w-full bg-white/5 hover:bg-white/10 h-[50%] rounded-t-sm transition-all"></div>
                            <div class="w-full bg-white/5 hover:bg-white/10 h-[35%] rounded-t-sm transition-all"></div>
                            <div class="w-full bg-white/5 hover:bg-white/10 h-[20%] rounded-t-sm transition-all"></div>
                        </div>
                        <div class="flex justify-between text-[10px] text-muted mt-2 px-1">
                            <span>00:00</span>
                            <span>06:00</span>
                            <span>12:00</span>
                            <span>18:00</span>
                            <span>23:59</span>
                        </div>
                    </div>

                    <!-- Usage Table -->
                    <div class="col-span-1 bg-surface2 border border-border rounded-lg flex flex-col overflow-hidden">
                        <div class="p-3 border-b border-border bg-white/5">
                            <h3 class="text-sm font-medium text-primary">费用分布</h3>
                        </div>
                        <div class="flex-1 overflow-y-auto p-0">
                            <table class="w-full text-left border-collapse">
                                <tbody>
                                    <tr class="border-b border-border/50 hover:bg-white/5 group cursor-default">
                                        <td class="p-3">
                                            <div class="text-xs font-medium text-primary">Sonnet 3.5</div>
                                            <div class="text-[10px] text-muted">65% Usage</div>
                                        </td>
                                        <td class="p-3 text-right">
                                            <div class="text-xs font-bold text-white">¥21.70</div>
                                        </td>
                                    </tr>
                                    <tr class="border-b border-border/50 hover:bg-white/5 group cursor-default">
                                        <td class="p-3">
                                            <div class="text-xs font-medium text-primary">Opus 3</div>
                                            <div class="text-[10px] text-muted">25% Usage</div>
                                        </td>
                                        <td class="p-3 text-right">
                                            <div class="text-xs font-bold text-white">¥6.65</div>
                                        </td>
                                    </tr>
                                    <tr class="border-b border-border/50 hover:bg-white/5 group cursor-default">
                                        <td class="p-3">
                                            <div class="text-xs font-medium text-primary">Haiku 3</div>
                                            <div class="text-[10px] text-muted">10% Usage</div>
                                        </td>
                                        <td class="p-3 text-right">
                                            <div class="text-xs font-bold text-white">¥1.61</div>
                                        </td>
                                    </tr>
                                    <!-- Filler to show structure -->
                                     <tr class="hover:bg-white/5 group cursor-default">
                                        <td class="p-3">
                                            <div class="text-xs font-medium text-muted">Other</div>
                                        </td>
                                        <td class="p-3 text-right">
                                            <div class="text-xs font-bold text-muted">¥0.00</div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Recent Logs (List View) -->
                <div>
                     <h3 class="text-sm font-medium text-primary mb-3">实时日志流</h3>
                     <div class="bg-surface2 border border-border rounded-lg overflow-hidden">
                         <div class="grid grid-cols-[80px_120px_1fr_100px] gap-4 px-4 py-2 border-b border-border text-[11px] font-medium text-muted uppercase tracking-wider bg-white/5">
                             <div>时间</div>
                             <div>模型</div>
                             <div>项目 / 会话 ID</div>
                             <div class="text-right">消耗 / 费用</div>
                         </div>
                         
                         <!-- Row 1 -->
                         <div class="grid grid-cols-[80px_120px_1fr_100px] gap-4 px-4 py-2.5 border-b border-border/50 hover:bg-white/5 transition-colors items-center text-xs">
                             <div class="font-mono text-muted">10:42:15</div>
                             <div><span class="px-1.5 py-0.5 rounded bg-accent/20 text-accent text-[10px] font-medium border border-accent/20">Sonnet 3.5</span></div>
                             <div class="text-primary truncate select-text">claude-monitor / fix-ui-bug</div>
                             <div class="text-right">
                                 <div class="text-white">¥0.08</div>
                                 <div class="text-[10px] text-muted">4.2k tokens</div>
                             </div>
                         </div>

                         <!-- Row 2 -->
                         <div class="grid grid-cols-[80px_120px_1fr_100px] gap-4 px-4 py-2.5 border-b border-border/50 hover:bg-white/5 transition-colors items-center text-xs">
                             <div class="font-mono text-muted">10:41:03</div>
                             <div><span class="px-1.5 py-0.5 rounded bg-blue-500/20 text-blue-400 text-[10px] font-medium border border-blue-500/20">Opus 3</span></div>
                             <div class="text-primary truncate select-text">personal-blog / generate-post</div>
                             <div class="text-right">
                                 <div class="text-white">¥1.72</div>
                                 <div class="text-[10px] text-muted">12.5k tokens</div>
                             </div>
                         </div>

                         <!-- Row 3 -->
                          <div class="grid grid-cols-[80px_120px_1fr_100px] gap-4 px-4 py-2.5 hover:bg-white/5 transition-colors items-center text-xs">
                             <div class="font-mono text-muted">10:39:55</div>
                             <div><span class="px-1.5 py-0.5 rounded bg-accent/20 text-accent text-[10px] font-medium border border-accent/20">Sonnet 3.5</span></div>
                             <div class="text-primary truncate select-text">claude-monitor / feature-login</div>
                             <div class="text-right">
                                 <div class="text-white">¥0.06</div>
                                 <div class="text-[10px] text-muted">3.8k tokens</div>
                             </div>
                         </div>
                     </div>
                </div>

            </div>
        </div>

        <!-- Status Bar -->
        <footer class="h-[28px] border-t border-border bg-sidebar flex items-center px-3 justify-between text-[10px] text-muted select-none">
            <div class="flex items-center gap-3">
                <span class="flex items-center gap-1.5 text-emerald-400">
                    <div class="w-1.5 h-1.5 rounded-full bg-emerald-400 shadow-[0_0_5px_rgba(52,211,153,0.5)]"></div>
                    已连接
                </span>
                <span class="w-px h-3 bg-white/10"></span>
                <span>v1.0.0</span>
            </div>
            <div class="flex items-center gap-3">
                <span>Memory: 45MB</span>
                <span>File Watcher: Active</span>
            </div>
        </footer>
    </main>

    <script>
        lucide.createIcons();
    </script>
</body>
</html>
